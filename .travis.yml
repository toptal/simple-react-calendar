language: node_js
node_js:
  - '0.12'
cache:
  directories:
    - node_modules
before_install:
  - wget https://s3.amazonaws.com/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2
  - tar -xjf phantomjs-2.0.0-ubuntu-12.04.tar.bz2
  - mv phantomjs "$TRAVIS_BUILD_DIR/tmp/phantomjs2"
  - export PHANTOMJS_BIN="$TRAVIS_BUILD_DIR/tmp/phantomjs2"
  - wget http://www.browserstack.com/browserstack-local/BrowserStackLocal-linux-x64.zip
  - unzip BrowserStackLocal-linux-x64.zip
  - mv BrowserStackLocal "$TRAVIS_BUILD_DIR/tmp/BrowserStackLocal"
  - export BROWSER_STACK_BINARY_BASE_PATH="$TRAVIS_BUILD_DIR/tmp"
before_script:
  # Says which display to use (could be 0.0, 0.1, 1.0 etc.). Generally, 99.0 is not used by any application,
  # so display should not conflict with any other possible displays used by the system. That is why we choose it.
  - export DISPLAY=:99.0
  # Runs virtual desktop to allow Firefox to run
  - sh -e /etc/init.d/xvfb start
script:
  - npm run test-cross-browser
